---
import Layout from '@layouts/Layout.astro'
import { getCollection } from 'astro:content'
import Card from '@components/Card.astro'

const featuredPosts = await getCollection('posts', ({ data }) => {
  return data.draft !== true && data.featured
})

const sortedFP = featuredPosts.sort(
  (a, b) =>
    Date.parse(b.data.year.toString()) - Date.parse(a.data.year.toString())
)

export interface Props {
  title: string
  year: number
  category: string
  ogImage?: string
  bodyClass: string
  mainClass: string
}

const bodyClass = 'home'
const mainClass = 'no_padding'
const pageTitle = 'empowers'
const pageTLDR = 'Flexible Communication Design Service for small companies.'
---

<Layout
  bodyClass={bodyClass}
  mainClass={mainClass}
  pageTitle={pageTitle}
  pageTLDR={pageTLDR}
  ogImage="../og_home.jpg">
  <div class="wrap section">
    <div class="container">
      <h1>
        <strong>Rokma</strong> Believes your customers should understand you.
      </h1>
    </div>
  </div>

  <div class="wrap all_works section">
    <div class="container">
      <h1>
        <strong>Rokma</strong> Empowers Your Work.
      </h1>
    </div>
    {
      sortedFP.map((post) => (
        <a class="card_link" href={`/${post.data.category}/${post.slug}`}>
          <Card
            title={post.data.title}
            image={post.data.images[0]}
            category={post.data.category}
          />
        </a>
      ))
    }
  </div>

  <div class="wrap section">
    <div class="container">
      <h1>
        <strong>Rokma</strong> Helps You Deliver Your Message.
      </h1>
    </div>
  </div>

  <div class="wrap section">
    <div class="container">
      <h1>
        <strong>Rokma</strong> Makes Your Offer Recognizable.
      </h1>
    </div>
  </div>

  <div class="wrap section last">
    <div class="container">
      <h1>
        <a class="bottom_link" href="/photography/">
          <strong>Now...</strong><br />
          Let the light shine.
        </a>
      </h1>

      <div>
        <a class="homepage_last_link" href="/about/">Know more about Rokma ></a>
      </div>
    </div>
  </div>
</Layout>

<style lang="scss">
  .wrap {
    min-height: 100dvh;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    background: var(--primary_back); // fallback
    background: linear-gradient(var(--primary_back) 5%, var(--primary));
    background-blend-mode: normal;
    a {
      color: var(--primary_front);
    }
  }
  .all_works {
    padding-top: 5rem;
    padding-bottom: 0 !important;
  }
  .card_link,
  .card {
    padding-bottom: 0 !important;
  }

  a {
    text-decoration: none;
  }
</style>
