---
import Layout from '@layouts/Layout.astro'
import { getCollection } from 'astro:content'
import Card from '@components/Card.astro'
import * as siteData from '@data/site.json'

const category = 'web-design'

const unsortedPosts = await getCollection('posts', ({ data }) => {
  return data.draft !== true && data.category == category
})

const posts = unsortedPosts.sort(
  (a, b) =>
    Date.parse(b.data.year.toLocaleString()) -
    Date.parse(a.data.year.toLocaleString())
)

export interface Props {
  pageTitle: string
  year: number
  category: string
  ogImage?: string
  bodyClass: string
  mainClass: string
  pageDesc: string
}

const bodyClass = category
const ogImage = '../assets/p/og_large_image.jpg'
const mainClass = 'container'
const pageDesc = siteData.description_web
---

<Layout
  pageTitle={category.toUpperCase()}
  pageDesc={pageDesc}
  bodyClass={bodyClass}
  mainClass={mainClass}
  ogImage={ogImage}>
  <h1>{siteData.title} <span>{category}</span></h1>
  <p class="center">Recent digital product design works</p>
  <div class="container posts">
    {
      posts.map((post) => (
        <a class="post" href={`/${category}/${post.slug}`}>
          <Card
            title={post.data.title}
            category={post.data.category}
            image={post.data.images[0]}
          />
        </a>
      ))
    }
  </div>
</Layout>
<style lang="scss">
  .posts {
    display: grid;
    grid-gap: 0.5rem;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
  .post {
    text-decoration: none;
  }
  h1 span {
    opacity: 0.5;
  }
</style>
